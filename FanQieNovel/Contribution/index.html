<!DOCTYPE html>
<html lang="zh_CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>词库贡献</title>
    <style>
        * {
            bottom: 0;
            padding: 0;
            user-select: none;
        }

        body {
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .Title {
            font-size: 26px;
            font-weight: bold;
        }

        .Main {
            padding: 10px;
            background-color: #b9b9b9;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        #Code {
            padding: 3px 0;
            width: 100%;
            background-color: #80ceff;
            text-align: center;
            border-radius: 3px;
        }

        #Input {
            width: 100%;
            text-align: center;
        }

        @font-face {
            font-family: 'FQ';
            src: url('zt.woff2');
        }

        #FQ {
            font-family: 'FQ';
            font-size: 30px;
            font-weight: bold;
        }

        #Submit {
            padding: 5px 0;
            width: 100%;
            background-color: #80ceff;
            border: none;
            border-radius: 3px;
        }
    </style>
</head>

<body>
    <p class="Title">感谢您能为词库提交贡献!</p>
    <div class="Main">
        <p id="Code">*</p>
        <p id="FQ">*</p>
        <p>请输入这是什么字:</p>
        <input type="text" id="Input" placeholder="请输入" maxlength="1">
        <p>请多次检查无误后按下回车键或者提交按钮</p>
        <button id="Submit">提交\下一个</button>
    </div>
    <script>
        // 获取提交按钮
        const SubmitBut = document.getElementById('Submit')
        // 获取输入框
        const Input = document.getElementById('Input')
        // 获取码点
        const Code = document.getElementById('Code')
        // 获取FQ
        const FQ = document.getElementById('FQ')

        // 监听提交按钮
        SubmitBut.addEventListener('click', () => {
            Submit(Input.value)
        })

        // 监听输入框回车
        Input.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                Submit(Input.value)
            }
        })

        // 提交
        const Submit = (Value) => {
            // 判断输入框是否为空
            if (Value !== '') {
                // 禁用
                SubmitBut.innerText = '提交中...'
                SubmitBut.disabled = true
                Input.disabled = true
                // 网络请求
                fetch(`//api.elake.top/FanQieNovel/Add?Code=${Code.textContent}&Character=${Value}`).then(res => res.json()).then(Data => {
                    GetData()
                    Input.value = ''
                    SubmitBut.innerText = '获取下一个...'
                })
            }
        }

        // 获取数据
        const GetData = () => {
            // 网络请求
            fetch('//api.elake.top/FanQieNovel/Contribution/API.php').then(res => res.json()).then(Data => {
                Code.textContent = Data.Data[1]
                FQ.textContent = Data.Data[0]
                // 解除禁用
                SubmitBut.innerText = '提交\\下一个'
                SubmitBut.disabled = false
                Input.disabled = false
            })
        }

        GetData()
    </script>
</body>

</html>
